---
layout: single
title: "dailylog 8-07-20"
tags: dailylog visuals googlemaps apis plotly
---

# GOAL:

I want to visualize zip code data on a map.

## PROBLEM:

I need a map?

## SOLUTION:

Plotly!

## PROBLEM:

Plotly + zip codes don't play nice unless you have FIPS data (which we can get but that is another animal)

## SOLUTION:

Use geo data!

## PROBLEM:

Where do we get geo data??

## SOLUTION:

GoogleMaps!! Simply add the zip code to the end of the query string and WIN!!

## PROBLEM:

This code

```python
from urllib.request import urlopen
import json
with urlopen("http://maps.googleapis.com/maps/api/geocode/json?address=91011") as response:
    geoj = json.load(response)
```

Gives us this error

```json
{
  "error_message": "You must use an API key to authenticate each request to Google Maps Platform APIs. For additional information, please refer to http://g.co/dev/maps-no-account",
  "results": [],
  "status": "REQUEST_DENIED"
}
```

## SOLUTION:

(In my head) Oh since needing an API key is probably just an issue of backend vs frontend, I WILL CIRCUMVENT THE PROBLEM AND JUST USE JAVASCRIPT TO CREATE A CSV!!

## PROBLEM:

THIS

```javascript
var response = await fetch(
  "https://maps.googleapis.com/maps/api/geocode/json?address=91011"
);
var body = await response.json();
```

STILL GIVES US THIS ERROR

```javascript
{error_message: "You must use an API key to authenticate each requeâ€¦, please refer to http://g.co/dev/maps-no-account", results: Array(0), status: "REQUEST_DENIED"}
```

## SOLUTION:

Get an API key!! (Yes, we have to put billing info but there is no way we will exceed 200 requests per second so the likilhood we will get charged is slim... but I should still add a restriction)

## PROBLEM:

Even WITH the API key

```javascript
var response = await fetch(
  "https://maps.googleapis.com/maps/api/geocode/json?address=91011&key=MY_COOL_KEY"
);
var body = await response.json();
```

We get THIS error

```javascript
{error_message: "This API project is not authorized to use this API.", results: Array(0), status: "REQUEST_DENIED"}
```

## SOLUTION:

Go back to Google and add `Geocoding API` to your project

... and finally, the above request works :)
