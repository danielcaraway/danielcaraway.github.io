---
layout: single
title: "dailylog 7-19-20"
tags: dailylog pandas visuals facet matplotlib
---

```python
font = {'family': 'san-serif','size': 14, 'weight': 'normal'}
labelfont = {'family': 'san-serif', 'size': 18}
titlefont = {'family': 'serif', 'size': 30}

plt.figure(figsize=(10,6), dpi=300)
ax = sns.countplot(x="company_code", data=df_new,  palette="GnBu_d")

for p in ax.patches:
    print(p)
    count = p.get_height()
    x = p.get_x() + (p.get_width()/ 2.3)
    y = p.get_y() + p.get_height() + 20
    ax.annotate(count, (x,y))

ax.spines['right'].set_visible(False)
ax.spines['top'].set_visible(False)
plt.title('Teammates Per Company', fontdict=titlefont, y=1.2)
plt.xlabel('Company',fontdict=labelfont, labelpad=20)
plt.ylabel('Number of Teammates', fontdict=labelfont, labelpad=20)
plt.rc('font', **font)
plt.show()
```

```python

N = 100
industry = ['a','b','c']
city = ['x','y','z']
ind = np.random.choice(industry, N)
cty = np.random.choice(city, N)
jobs = np.random.randint(low=1,high=250,size=N)
df_city =pd.DataFrame({'industry':ind,'city':cty,'jobs':jobs})

## how many panels do we need?
cols =df_city.city.value_counts().shape[0]
fig, axes = plt.subplots(1, cols, figsize=(8, 8))

for x, city in enumerate(df_city.city.value_counts().index.values):
    data = df_city[(df_city['city'] == city)]
    data = data.groupby(['industry']).jobs.sum()
    print (data)
    print (type(data.index))
    left=  [k[0] for k in enumerate(data)]
    right=  [k[1] for k in enumerate(data)]

    axes[x].bar(left,right,label="%s" % (city))
    axes[x].set_xticks(left, minor=False)
    axes[x].set_xticklabels(data.index.values)

# for p in ax.patches:
#     print(p)
#     count = p.get_height()
#     x = p.get_x() + (p.get_width()/ 2.3)
#     y = p.get_y() + p.get_height() + 20
#     ax.annotate(count, (x,y))

    for p in axes[x].patches:
        count = p.get_height()
        __x = p.get_x() + (p.get_width())
        __y = p.get_y() + p.get_height()
        axes[x].annotate(count, (__x,__y))


    axes[x].annotate('hello', (-0.5,0.8))

    axes[x].legend(loc='best')
    axes[x].grid(True)
    fig.suptitle('Employment By Industry By City', fontsize=20)

```
